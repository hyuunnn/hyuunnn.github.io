---
layout: post
title: "만들면서 배우는 클린 아키텍처"
description: ""
date: 2023-03-12
tags: ["architecture", "book"]
---

책이 얇아서 이틀이면 다 읽겠다는 생각을 했는데 생각보다 오래 걸렸다..

작년 겨울 방학 때 영한님 강의로 스프링 공부를 처음 시작했고 코드 설계 관점에서 더 깊게 공부해보고 싶어서 본건데 아직 경험이 많이 부족하다는 것을 느꼈다.

다양한 책들을 읽어보고 다시 읽어봐야겠다는 생각이 들었다.

## 데이터베이스 중심적인 개발이 당연한건 아니다.

```text
데이터베이스의 구조를 먼저 생각하고, 이를 토대로 도메인 로직을 구현하는 방법인 계층형 아키텍처는 의존성의 방향에 따라 자연스럽게 구현한 것이다. 하지만 비지니스 관점에서는 전혀 맞지 않는 방법이다. 다른 무엇보다 도메인 로직을 먼저 만들어서 로직을 제대로 이해하고 만들었는지 확인한 후에 이를 기반으로 영속성 계층과 웹 계층을 만들어야 한다.

데이터베이스 중심적인 아키텍처가 만들어지는 가장 큰 원인은 ORM 프레임워크를 사용하기 때문이다. (저자도 하이버네이트를 애용하고 있다고 한다.)
```

## 빌더 패턴이 무조건 좋지만은 않다.

새로운 필드를 추가해야 하는 상황에서 빌더를 호출하는 코드에 새로운 필드를 추가하는 것을 까먹게 된다면 컴파일러에서 잡아내지 못하며, 별도의 유효성 검증 로직에서 잡아내지 못한다면 결국 큰 오류로 발생할 가능성을 만들어준다.

하지만 생성자를 사용한다면 추가하지 않았을 떄 컴파일러에서 잡아내기 때문에 오류를 바로 잡아낼 수 있다. 

즉 선택적으로 필드 값을 지정할 수 있는 빌더의 장점이자 단점이 될 수도 있다.
