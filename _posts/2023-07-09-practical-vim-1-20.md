---
layout: post
title: "Practical Vim (Tip 01 - 20)"
description: ""
date: 2023-07-09
tags: [book]
---

```
기본적인 Vim 사용법을 학습한 후에는 무엇을 배워야 할까? 이 질문의 답은 Tip이다.
Vim을 사용하다가 비효율적인 방법이라고 생각이 들었을 때 검색을 통해 찾아보곤 한다.
하지만 이러한 방법은 학습이 느리다는 것이다. 
이 책은 Vim의 기능을 효율적으로 사용할 수 있는 다양한 Tip을 제공한다. - Tim Pope
```

```
Drew Neil이 쓴 최고의 Vim 입문서.
Vim을 잘 쓰고 싶다면 꼭 읽어야 할 책이다. - johngrib
```

<a href="https://johngrib.github.io/wiki/review/2017/">한 줄 리뷰</a>, <a href="https://johngrib.github.io/wiki/my-favorite-books/">나의 성장을 도와준 고마운 책들</a>

## 시작하기 전에

**<a href="https://github.com/johngrib/simple_vim_guide/blob/master/md/with_korean.md">한국어 키보드로 VIM 사용하기</a>**

```
책에서 제시하는 기법을 읽는 것으로 끝내지 말고 매일 직면하는 문제와 어떤 점이 유사한지, 어떻게 적용하면 좋을지, 더 좋은 방법은 무엇인지 생각해보자. - xvii
```

```
Vim의 NORMAL 모드 명령 시스템은 텍스트 처리 언어로 볼 수 있다고 생각한다.
입력한 문자의 조합으로 여러 기능을 정의할 수 있기 때문이다.
이러한 특성은 스타크래프트의 단축키와 비슷하다. (단축키 없이 커서로 클릭하는 방식이었다면 불편한 게임이 되었을 것이다.) - johngrib
```

<a href="https://johngrib.github.io/wiki/two-views-of-vim/">Vim, 두 가지 관점</a>

### Tip 01. 점 명령 만나기

Vim은 반복적인 작업에 최적화된 편집기이다. Tip 01에서 알려주는 점 명령(`.`)을 사용하면 마지막 변경을 반복할 수 있다.

마지막 변경이라는 기준은 넓다. 예를 들어 `caw`와 같은 조합으로 삭제했다면 똑같은 명령을 입력하지 않고, `.` 명령을 통해 반복 작업을 수행할 수 있다.

### Tip 02. 반복하지 않기

```javascript
// 각 줄의 끝에 세미콜론을 추가해야 하는 상황
var foo = 1
var bar = 'a'
var foobar = foo + bar
```

행 끝으로 가는 `$` 명령과 `a;<Esc>`를 누르면 세미콜론을 추가할 수 있다. 이때 `j$.`을 누르면 다음 줄의 끝에도 세미콜론을 추가할 수 있다.

하지만 더 효율적인 방법이 있다. `$a` 동작을 한 번에 수행하는 `A` 명령을 사용하는 것이다.

`A;<Esc>`를 누르면 줄의 끝에 세미콜론을 추가할 수 있고, `j.` 명령으로 반복할 수 있다. (동작이 더 간단해졌다.)

### Tip 03. 한 걸음 물러나고 세 걸음 나아가기

```javascript
// + 문자 앞뒤로 띄어쓰기를 추가해야 하는 상황
var foo = "method(" + argument1+","+argument2+")";
```

`f+`를 입력하면 `+` 문자의 위치를 검색하여 커서를 이동할 수 있다. 그 다음 `s` 명령으로 지우고 ` + `를 추가하면 INSERT MODE에서 작성한 문자를 점 명령으로 반복할 수 있다.

또한 `;`를 사용하여 다음 `+` 문자로 이동할 수 있기 때문에 `;.` 명령으로 반복할 수 있다.

### Tip 04. 실행하기, 반복하기, 되돌리기

```
j.j.j.을 반복해서 입력하다보면 마치 드럼치듯 리듬을 타기 쉽다. 하지만 실수로 누른다면 어떻게 해야할까? - p9
```

지금까지 사용한 기능들의 반대 역할도 존재한다. 

|기능|동작|반복|되돌리기|
|---|---|---|---|
|내용 변경하기|{편집}|.|u(undo), `<C-R>`(redo)|
|행에서 다음 문자 찾기|f{문자} / t{문자}|;|,|
|행에서 이전 문자 찾기|F{문자} / T{문자}|;|,|
|문서에서 다음 일치 찾기|/패턴`<CR>`|n|N|
|문서에서 이전 일치 찾기|?패턴`<CR>`|n|N|
|치환 동작하기|:s/대상/치환|&|u|
|연속 변경 실행하기|qx{변경}q|@x|u|


### Tip 05. 직접 찾고 치환하기

```text
...We're waiting for content before the site can go live...
...If you are content with this, let's go ahead with it...
...We'll launch as soon as we have the content...
```

위 문장에서 모든 `content`를 `copy`로 치환하고 싶다면 `:%s/content/copy/g`를 입력하면 된다.

하지만 일부만 치환하고 싶다면 커서가 위치한 단어를 찾아주는 `*` 명령을 사용하고 수정할 단어를 입력한 후 `n.`을 입력하면 된다.

GitHub Copilot: 더 좋은 방법은 `c` 플래그를 사용하면 된다. `:%s/content/copy/gc`를 입력하면 일치하는 모든 문자열을 치환하기 전에 사용자에게 확인을 요청한다.

### Tip 06. 점 공식 만나기

-

### Tip 07. 붓을 놓고 잠시 멈추기

화가가 캔버스에 붓을 대고 쉬지 않는 것처럼 Vim의 NORMAL MODE를 쉬고 있는, 대기 상태라고 표현하고 있다.

즉 코드를 작성하는 INSERT MODE와 생각하는 NORMAL MODE로 분리되어 있다고 생각하면 되겠다.

### Tip 08. 덩어리로 실행 취소하기

일반적인 문서 편집기는 마지막으로 입력한 문자로 되돌리는 UNDO 기능만 제공한다. 하지만 Vim은 사용자가 `<Esc>`를 통해 취소 동작 범위를 정할 수 있다. (INSERT MODE에서의 모든 입력을 하나의 변경점으로 처리)

벗어나는 주기는 개인 취향이며, 입력을 멈추는 상황이거나 새로운 행을 추가하는 시점에 하면 괜찮다고 한다.

### Tip 09. 반복 가능한 변경 조합하기

Vim은 같은 작업을 다양한 방법으로 수행할 수 있다.

예를 들어 `The end is nigh`에서 `nigh`를 지우고 싶을 때 책에서는 3가지 방법을 알려주고 있다.

* 단어 끝에서 `db` (첫 글자로 이동하면서 삭제) 입력 후 `x`를 입력하여 `The end is`로 변경할 수 있다.
* 단어 끝에서 `b` (첫 글자 이동) 입력 후 `dw` (단어 삭제)를 입력하여 `The end is`로 변경할 수 있다.
* 단어 위치에서 `daw` (delete a word)를 입력하여 `The end is`로 변경할 수 있다.

이때 제일 좋은 방법은 `daw`를 사용하는 것이다. 첫 번째 방법은 점 명령을 사용했을 때 `x` 명령만 수행하고, 두 번째 방법은 점 명령을 사용했을 때 `dw` 명령만 수행한다.

하지만 마지막 방법은 `daw`라는 하나의 명령으로 수행했기 때문에 효율적인 점 명령을 사용할 수 있다.

**반복할 수 있는 방식으로 명령을 조합해서 사용하는 습관을 기르자**

### Tip 10. 간단한 산술에 실행 횟수 사용하기

```css
.blog, .news { background-image: url(/sprite.png); }
.blog { background-position: 0px 0px }
```

일반적인 방법으로 `px` 값을 수정하려면 마우스로 숫자를 선택한 후에 수정해야 한다. (Vim에서는 `f` 또는 `/` 명령을 사용할 수도 있겠다.)

하지만 Vim은 `<C-a>`와 `<C-x>`를 사용하면 현재 커서 위치 이후에 가장 가까운 숫자로 이동하여 증가, 감소시킬 수 있다. (+180: `180<C-a>`, -180: `180<C-x>`)

### Tip 11. 직접 반복할 수 있다면 실행 횟수 사용하지 않기

Vim은 실행 횟수를 입력하여 입력한 명령을 여러 번 수행할 수 있다. 예를 들어 `2daw`라고 입력하면 2개의 단어를 삭제한다.

하지만 2개의 단어를 삭제하고 나서 하나의 단어를 삭제하고 싶다면? 생각해보니 3개의 단어를 추가로 지워야 한다면? 매번 명령을 입력해야 한다.

단순하게 생각하면 `daw`를 사용하고 점 명령을 활용하여 반복하면 된다.

그러나 이는 개인적인 취향에 따라서 갈리는 부분이다. (10개의 단어를 지우기 위해 `daw.........` 또는 `10daw`를 입력하는 방법) 

### Tip 12. 분할 정복

TODO

### Tip 13. 끼워넣기 모드에서 바로 교정하기

이번 Tip은 수정하기 위해서 NORMAL MODE로 돌아가지 않고, INSERT MODE에서도 수정할 수 있다는 것을 알려주고 있다.

하지만 세밀한 수정을 해야한다면 어차피 NORMAL MODE로 이동해야하므로 개인적인 생각으로 잘 사용하지 않을 것 같다.

|키|효과|
|---|---|
|`<C-h>`|백스페이스 기능|
|`<C-w>`|앞에 있는 단어 하나 제거|
|`<C-u>`|행의 시작 부분까지 제거|

### Tip 14. 일반 모드로 돌아가기

이번 Tip에서 얻어갈 수 있는 내용은 INSERT-NORMAL MODE가 있다는 것이다.

책에서는 **일반 모드로 들어가는 일회용 쿠폰**이라고 표현하고 있다.

즉 INSERT MODE에서 NORMAL MODE 기능을 한 번 사용할 때 유용하다. (INSERT MODE에서 NORMAL MODE로 전환한 후 다시 INSERT MODE로 전환하는 번거로움을 줄일 수 있다.)

|키|효과|
|---|---|
|`<Esc>`|일반 모드로 전환|
|`<C-[>`|일반 모드로 전환|
|`<C-o>`|INSERT-NORMAL MODE로 전환|

### Tip 15. 끼워넣기 모드를 벗어나지 않고 레지스터 붙여넣기

Vim에서 REDO, UNDO가 가능한 이유는 변경점을 저장하는 레지스터가 존재하기 때문이다. (`:registers` 명령어로 확인 가능)

또한 복사한 내용을 붙여넣을 때도 레지스터를 사용한다. (`yy`를 입력하고 레지스터를 확인해보자.)

이때 INSERT MODE를 벗어나지 않고 `<C-r>0`을 입력하면 제일 최근(`0번째`)에 복사한 내용을 붙여넣을 수 있다. 

여러 행을 붙여넣을 때는 보통 NORMAL MODE로 전환하여 사용한다. (예를 들어 NORMAL MODE에서 `3p`를 입력하면 3번 붙여넣기가 가능하다.) 

### Tip 16. 즉석에서 계산하기

표현식 레지스터는 `=` 기호를 사용하며 INSERT MODE에서 `<C-r>=` 입력 후 계산식을 입력하면 계산 결과가 입력된다.

`<C-r>=6*35`를 입력하면 `210`이 입력된다.

### Tip 17. 문자 코드를 이용해 일반적이지 않은 문자 입력하기



### Tip 18. 이중자로 일반적이지 않은 문자 삽입하기



### Tip 19. 바꾸기 모드로 존재하는 문서를 덮어쓰기


